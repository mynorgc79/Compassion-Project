{% extends '../index_master.html' %} {% block content %} {% load static %}

<div class="right_col" role="main">
  <form action="agregar" method="POST">
    {% csrf_token %}

    <h1 style="font-family: 'Arial', sans-serif; font-size: 24px; color: #333">
      Datos Familiares
    </h1>

    <div class="form-group row">
      <label for="nombre" class="col-4 col-form-label">Datos del Padre</label>
      <div class="col-4">
        <input
          id="nombre_padre"
          name="nombre_padre"
          type="text"
          class="form-control"
          placeholder="Nombres"
          oninput="validateLetters(this, 'nombre-padre-error')"
        />
        <span id="nombre-padre-error" style="color: red"></span>
      </div>

      <div class="col-4">
        <input
          id="apellido_padre"
          name="apellido_padre"
          type="text"
          class="form-control"
          placeholder="Apellidos"
          oninput="validateLetters(this, 'apellido-padre-error')"
        />
        <span id="apellido-padre-error" style="color: red"></span>
      </div>
    </div>

    <div class="form-group row">
      <label for="nombre" class="col-4 col-form-label">Datos de la madre</label>
      <div class="col-4">
        <input
          id="nombre_madre"
          name="nombre_madre"
          type="text"
          class="form-control"
          placeholder="Nombres"
          oninput="validateLetters(this, 'nombre-madre-error')"
        />
        <span id="nombre-madre-error" style="color: red"></span>
      </div>

      <div class="col-4">
        <input
          id="apellido_madre"
          name="apellido_madre"
          type="text"
          class="form-control"
          placeholder="Apellidos"
          oninput="validateLetters(this, 'apellido-madre-error')"
        />
        <span id="apellido-madre-error" style="color: red"></span>
      </div>
    </div>

    <div class="form-group row">
      <label for="observacion" class="col-4 col-form-label">Direccion</label>
      <div class="col-8">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fa fa-align-justify"></i>
            </div>
          </div>
          <input
            id="direccion"
            name="direccion"
            type="text"
            class="form-control"
            required="required"
          />
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label for="observacion" class="col-4 col-form-label">Contacto</label>
      <div class="col-8">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fa fa-mobile"></i>
            </div>
          </div>
          <input
            id="contacto"
            name="contacto"
            type="number"
            class="form-control"
            required="required"
            pattern="[0-9]{8}"
            maxlength="8"
            oninput="validarLongitud(this, 8, 'contacto-error')"
          />
          <span id="contacto-error" style="color: red"></span>
        </div>
      </div>
    </div>

    <!-- INGRESANDO LOS DATOS DEL BENEFICIARIO -->

    <h1>Datos del Beneficiari@</h1>

    <div class="form-group row">
      <label for="codigo" class="col-4 col-form-label">Codigo</label>
      <div class="col-8">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fa fa-id-card"></i>
            </div>
          </div>
          <input
            id="codigo"
            name="codigo"
            type="number"
            required="required"
            class="form-control"
          />
          <span id="codigo-error" class="error" style="color: red"></span>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label for="nombre" class="col-4 col-form-label"
        >Nombres y Apellidos</label
      >
      <div class="col-4">
        <input
          id="nombre_beneficiario"
          name="nombre_beneficiario"
          type="text"
          class="form-control"
          required="required"
          placeholder="Nombres"
          oninput="validateLetters(this, 'nombre-beneficiario-error')"
        />
        <span id="nombre-beneficiario-error" style="color: red"></span>
      </div>

      <div class="col-4">
        <input
          id="apellido_beneficiario"
          name="apellido_beneficiario"
          type="text"
          class="form-control"
          required="required"
          placeholder="Apellidos"
          oninput="validateLetters(this, 'apellido-beneficiario-error')"
        />
        <span id="apellido-beneficiario-error" style="color: red"></span>
      </div>
    </div>

    <div class="form-group row">
      <label for="fecha_nacimiento" class="col-4 col-form"
        >Fecha de Nacimiento</label
      >
      <div class="col-8">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fa fa-calendar"></i>
            </div>
          </div>
          <input
            type="date"
            id="fecha_nacimiento"
            name="fecha_nacimiento"
            class="form-control"
            required
            placeholder="YYYY-MM-DD"
          />
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label for="" class="col-4 col-form-label">Género</label>
      <div class="col-8">
        <select
          id="genero"
          name="genero"
          required="required"
          class="custom-select"
        >
          <option value="" disabled selected>Seleccione el género</option>
          <option value="femenino">Femenino</option>
          <option value="masculino">Masculino</option>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="" class="col-4 col-form-label">Nivel</label>
      <div class="col-8">
        <select
          id="nivel"
          name="nivel"
          required="required"
          class="custom-select"
        >
          <option value="" disabled selected>Seleccione el nivel</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="observacion" class="col-4 col-form-label">Observacion</label>
      <div class="col-8">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fa fa-align-justify"></i>
            </div>
          </div>
          <input
            id="observacion"
            name="observacion"
            type="text"
            class="form-control"
            required="required"
          />
        </div>
      </div>
    </div>

    <div class="form-group row">
      <div class="offset-4 col-8">
        <button name="submit" type="submit" class="btn btn-primary">
          Agregar Beneficiario
        </button>
      </div>
    </div>
  </form>

  <script>
    // Función para validar que el valor solo contenga letras
    function validateLetters(input, errorId) {
      var lettersRegex = /^[a-zA-Z\s]*$/; // Expresión regular para letras y espacios
      var errorMessageElement = document.getElementById(errorId);

      if (!input.value.match(lettersRegex)) {
        errorMessageElement.innerHTML =
          "Solo se permiten letras y espacios en blanco.";
        input.setCustomValidity(
          "Solo se permiten letras y espacios en blanco."
        );
      } else {
        errorMessageElement.innerHTML = "";
        input.setCustomValidity("");
      }
    }
    //validar longitud de numero telefonico.
    function validarLongitud(input, maxLength, errorId) {
      const valor = input.value.trim();
      const errorElement = document.getElementById(errorId);

      if (valor.length > maxLength) {
        errorElement.textContent = "Solo se permiten 8 dígitos.";
        input.setCustomValidity("Solo se permiten 8 dígitos.");
        input.value = valor.substring(0, maxLength); // Recortar a 8 dígitos
      } else {
        errorElement.textContent = "";
        input.setCustomValidity("");
      }
    }

    // Función para validar que el valor solo contenga números
    // Validación para el campo "codigo" (aceptar solo números)
    const codigoInput = document.getElementById("codigo");
    const codigoError = document.getElementById("codigo-error");

    codigoInput.addEventListener("input", function (e) {
      const codigoValue = e.target.value;
      if (!/^\d+$/.test(codigoValue)) {
        codigoError.textContent = "Solo se permiten números.";
        codigoInput.setCustomValidity("Solo se permiten números.");
      } else {
        codigoError.textContent = "";
        codigoInput.setCustomValidity("");
      }
    });
  </script>
</div>

{% endblock %}
